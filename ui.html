<button id="add">+mark</button>
<ul id="figmark-list"></ul>
<script>

document.getElementById("add").onclick = () => {
  parent.postMessage({ pluginMessage: { type: "add-bookmark" } }, "*")
}

const findNode = (element) => {
  const id = element.dataset.id
  parent.postMessage({ pluginMessage: { type: "select-node", id: id } }, "*")
}

onmessage = (event) => {
  const data = event.data.pluginMessage
  if(data.type === "update-figmark") {
    const listWrapper = document.getElementById("figmark-list")
    listWrapper.innerHTML = ""
    data.value.forEach(v => {
      // TODO: コンポーネントの選択と遷移、２種類ボタンを用意する
      // TODO: aタグでコンポーネントに遷移できるようにする
      // TODO: 削除ボタンを用意する
      // TODO: コンポーネント名を任意のものに変更できるようにする
      const li = document.createElement("li")
      li.dataset.id = v.id
      li.innerText = v.name
      li.onclick = (() => findNode(li))
      listWrapper.appendChild(li)
    });
  }
}

</script>
